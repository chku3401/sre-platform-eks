# Observability

This directory contains the configurations for the observability stack, which includes Prometheus, Grafana, and Alertmanager. These tools provide monitoring, visualization, and alerting capabilities for the platform. The observability stack is essential for ensuring the reliability and performance of the deployed services.

---

## üåü Overview

- **Prometheus**: Collects metrics from Kubernetes and application workloads. It acts as the central repository for time-series data.
- **Grafana**: Visualizes metrics through customizable dashboards, enabling teams to monitor system health and performance.
- **Alertmanager**: Handles alerts generated by Prometheus, ensuring timely notifications for critical issues.

Dashboards are located in `platform/observability/dashboards/` and can be customized to suit specific monitoring needs.

---

## üöÄ Setup Instructions

1. **Deploy the Observability Stack**:
   Apply the Kubernetes manifests to deploy Prometheus, Grafana, and Alertmanager:
   ```bash
   kubectl apply -f platform/observability/
   ```

2. **Expose Grafana**:
   Forward the Grafana service to access it locally:
   ```bash
   kubectl -n observability port-forward svc/grafana 3000:80
   ```
   Open your browser and navigate to `http://localhost:3000`. The default credentials are:
   - Username: `admin`
   - Password: `admin`

3. **Load Dashboards**:
   Import the JSON files from `platform/observability/dashboards/` into Grafana. These dashboards provide insights into metrics such as CPU usage, memory consumption, and application performance.

---

## ‚úÖ Validation

1. **Check Prometheus**:
   ```bash
   kubectl -n observability port-forward svc/prometheus 9090:9090
   ```
   Open `http://localhost:9090` and verify that metrics are being collected. Use the "Targets" page to ensure all endpoints are being scraped successfully.

2. **Check Grafana**:
   Ensure dashboards are loading and displaying metrics correctly. Verify that the datasource is configured and connected to Prometheus.

3. **Check Alertmanager**:
   ```bash
   kubectl -n observability port-forward svc/alertmanager 9093:9093
   ```
   Open `http://localhost:9093` to verify alert configurations. Test alert rules to ensure notifications are triggered as expected.

---

## üñ•Ô∏è Dashboards

- Dashboards are stored as JSON files in `platform/observability/dashboards/`.
- If dashboards load but show "datasource not found," update the datasource UID in the JSON or edit the dashboard in Grafana.
- For production setups, template datasource names/UIDs via provisioning to ensure consistency across environments.

---

## üõ†Ô∏è Troubleshooting

- **Datasource Not Found**:
  - Edit the dashboard in Grafana and select the correct datasource.
  - Update the datasource UID in the JSON files if needed.

- **Metrics Not Collected**:
  - Ensure Prometheus is running and scraping the correct targets.
  - Check the Prometheus configuration for errors. Use the Prometheus UI to debug scrape failures.

- **Alerts Not Triggering**:
  - Verify that Alertmanager is running and configured correctly.
  - Check the Prometheus alerting rules for syntax errors or misconfigurations.
  - Test alert rules manually to confirm functionality.

---

This observability stack is designed to provide insights into the platform's performance and reliability. By leveraging Prometheus, Grafana, and Alertmanager, teams can proactively identify and resolve issues, ensuring a seamless user experience.
